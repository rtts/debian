- name: Install packages
  become: true
  apt:
    state: present
    name:
      - xbattbar
      - xbindkeys

- name: Configure Xsession
  become: true
  copy:
    src: Xsession.d/
    dest: /etc/X11/Xsession.d/

- name: Copy dotfiles
  become: true
  copy:
    src: dotfiles/
    dest: "{{ item.dest }}"
    owner: "{{ item.owner }}"
    force: "{{ item.force }}"
  loop:
    - dest: /home/{{ ansible_user_id }}/
      owner: "{{ ansible_user_id }}"
      force: false
    - dest: /etc/skel/
      owner: root
      force: true

- name: Install volume and brightness scripts
  become: true
  copy:
    src: "{{ item }}"
    dest: /usr/local/bin/
    mode: 0755
  loop:
    - volume
    - brightness

- name: Place xorg.conf configuration snippet
  become: true
  copy:
    src: 10-intel.conf
    dest: /etc/X11/xorg.conf.d/
